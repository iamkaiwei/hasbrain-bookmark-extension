webpackJsonp([7],{923:function(n,e,t){"use strict";function r(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function o(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?n:e}function i(n,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),t.d(e,"default",function(){return m});var c=t(0),u=t.n(c),s=t(951),l=t(449),d=(t.n(l),t(42)),f=t(64),h=(t.n(f),function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}()),m=function(n){function e(){var n,t,i,c;a(this,e);for(var u=arguments.length,l=Array(u),d=0;d<u;d++)l[d]=arguments[d];return t=i=o(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(l))),i.state={data:[],followedData:[],search:"",openAddModal:!1,isPrivate:!0,title:"",description:"",myPaths:null},i.getData=function(){Object(s.g)().then(function(n){if(n&&!n.errors){var e=n.data.items;i.setState({data:e})}}),Object(s.d)().then(function(n){if(n&&!n.errors){var e=n.data.items;i.setState({followedData:e})}}),Object(s.e)().then(function(n){return i.setState({myPaths:n})})},i._handleBookmark=function(n){Object(s.a)(n).then(function(n){if(!n||n.errors)return void f.toast.error("Path followed failed.");f.toast.success("Path followed successfully"),i.getData()})},i._handleBookmarkRemove=function(n){Object(s.n)(n).then(function(n){if(!n||n.errors)return void f.toast.error("Path un-followed failed.");f.toast.success("Path un-followed successfully"),i.getData()})},i._goToDetails=function(n){i.props.history.push("/paths/"+n)},i._goToEditor=function(n){i.props.history.push("/path/"+n)},i._createPath=function(){Object(s.k)("","",!0).then(function(n){i._goToEditor(n.user.pathCreate.recordId)})},i._handleChange=function(n,e){var t=e.name,a=e.value;return i.setState(r({},t,a))},i._handlePathRemove=function(n){Object(s.l)(n).then(function(e){if(e.errors)return f.toast.error("Path removed fails");var t=i.state.myPaths,r=t.filter(function(e){return e._id!==n});i.setState({myPaths:r},function(){return f.toast.success("Path removed successfully,")})})},i._changePrivacy=function(n,e,t){Object(s.r)(n,e).then(function(n){var r=i.state.myPaths;r[t]._source.privacy=e,i.setState({myPaths:r}),f.toast.success("Path update successfully")})},c=t,o(i,c)}return i(e,n),h(e,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var n=this,e=this.state,t=e.data,r=e.followedData,a=e.search,o=e.myPaths;if(null===o)return null;var i=t.map(function(n){var e=!1;return r.forEach(function(t){n._id===t.contentId&&(e=!0)}),Object.assign({follow:e},n)}),c=[],s=[];return i.map(function(n){return-1!==n.title.toLowerCase().indexOf(a.toLowerCase())&&c.push(n),null}),o.map(function(n){return-1!==n._source.title.toLowerCase().indexOf(a.toLowerCase())&&s.push(n),null}),u.a.createElement("div",{className:"series-list"},u.a.createElement("div",{className:"series-search-bar"},u.a.createElement(d.d,{name:"search",size:"big"}),u.a.createElement("input",{type:"text",name:"search",value:a,onChange:function(e){return n.setState({search:e.target.value})}})),u.a.createElement("div",{className:"series-path clearfix active"},u.a.createElement("h3",{className:"recommend-title"},"My paths",u.a.createElement(d.a,{onClick:this._createPath,floated:"right"},"Add a path")),null!==o&&u.a.createElement("div",{className:"series-items",style:{maxHeight:600*Math.ceil(s.length/4)}},s.map(function(e,t){return u.a.createElement("div",{key:t,className:"series-item"+(e.follow?" follow":"")},u.a.createElement("div",{className:"series-item-content",onClick:function(){return n._goToEditor(e._id)}},e._source.title),"private"===e._source.privacy&&u.a.createElement(d.f,{className:"path-privacy",onClick:function(){return n._changePrivacy(e._id,"everyone",t)}},u.a.createElement(d.d,{name:"lock"}),"Private"),"everyone"===e._source.privacy&&u.a.createElement(d.f,{className:"path-privacy",onClick:function(){return n._changePrivacy(e._id,"private",t)}},u.a.createElement(d.d,{name:"globe"}),"Public"),u.a.createElement(d.i,{inverted:!0,trigger:u.a.createElement(d.d,{className:"series-bookmark",size:"large",name:"trash",onClick:function(){return n._handlePathRemove(e._id)}}),content:"Remove this path"}))})),u.a.createElement("h3",{className:"recommend-title"},"Recommended paths"),u.a.createElement("div",{className:"series-items",style:{maxHeight:600*Math.ceil(i.length/4)}},c.map(function(e,t){return u.a.createElement("div",{key:t,className:"series-item"+(e.follow?" follow":"")},u.a.createElement("div",{className:"series-item-content",onClick:function(){return n._goToDetails(e._id)}},e.title),u.a.createElement(d.i,{inverted:!0,trigger:u.a.createElement(d.d,{className:"series-bookmark"+(e.follow?" followed":""),size:"large",name:"check square outline",onClick:function(){return e.follow?n._handleBookmarkRemove(e._id):n._handleBookmark(e._id)}}),content:"Follow this path"}))}))))}}]),e}(c.Component)},951:function(n,e,t){"use strict";function r(n){return n.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\/]/g,"\\/").replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t")}t.d(e,"g",function(){return o}),t.d(e,"c",function(){return i}),t.d(e,"d",function(){return c}),t.d(e,"h",function(){return u}),t.d(e,"f",function(){return s}),t.d(e,"a",function(){return l}),t.d(e,"b",function(){return d}),t.d(e,"n",function(){return f}),t.d(e,"o",function(){return h}),t.d(e,"j",function(){return m}),t.d(e,"m",function(){return p}),t.d(e,"i",function(){return v}),t.d(e,"q",function(){return y}),t.d(e,"s",function(){return g}),t.d(e,"r",function(){return b}),t.d(e,"p",function(){return _}),t.d(e,"k",function(){return k}),t.d(e,"l",function(){return O}),t.d(e,"e",function(){return w});var a=t(148),o=function(){return Object(a.a)({query:"\n      {\n      viewer {\n        pathRecommendPagination {\n          count\n          items {\n            _id\n            title\n            topicData {\n              _id\n            }\n          }\n        }\n      }\n    }\n\n    "}).then(function(n){return!n||n.errors?n:{data:n.data.viewer.pathRecommendPagination}})},i=function(){return Object(a.a)({query:"\n      query{\n        viewer{\n          topicPagination(page: 1, perPage: 100) {\n            count\n            items {\n              group\n              title\n              _id\n              shortDescription\n              image\n            }\n            follow {\n              sourceId\n            }\n          }\n        }\n      }\n    "}).then(function(n){return!n||n.errors?n:n.data.viewer.topicPagination})},c=function(){return Object(a.a)({query:'\n      {\n      viewer {\n        userbookmarkPagination (filter: {kind: "pathtype"}) {\n          items {\n            contentId\n            content {\n              title\n            }\n          }\n        }\n      }\n    }\n    '}).then(function(n){return!n||n.errors?n:{data:n.data.viewer.userbookmarkPagination}})},u=function(n){return Object(a.a)({query:'\n      query{\n        viewer{\n          articleFromTopic(filter: {\n            topicId: "'+n+'"\n          }) {\n            title\n            _id\n            url\n            authorImage\n            author\n            shortDescription\n            longDescription\n            sourceImage\n          }\n        }\n      }\n    '}).then(function(n){return!n||n.errors?n:n.data.viewer.articleFromTopic})},s=function(n){return Object(a.a)({query:'\n      {\n        viewer {\n          pathPagination(filter: {_id: "'+n+'"}) {\n            items {\n              privacy\n              title\n              projectId\n              shortDescription\n              layout\n              topic {\n                topicId\n                levelId\n                createdAt\n              }\n              topicData {\n                  _id\n                title\n                articleData {\n                  _id\n                  sourceName\n                  kind\n                  title\n                  contentId\n                  sourceImage\n                  shortDescription\n                  sourceActionName\n                  sourceActionCount\n                  sourceCommentCount\n                  readingTime\n                  sourceCreatedAt\n                  sourceData {\n                    title\n                    sourceImage\n                  }\n                  lastActionData{\n                    userData {\n                      profileId\n                      name\n                    }\n                    commentData{\n                      comment\n                    }\n                    highlightData{\n                      highlights {\n                        comment\n                        highlight\n                        note\n                        position\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    '}).then(function(n){return!n||n.errors?n:n.data.viewer.pathPagination.items[0]})},l=function(n){return Object(a.a)({query:'\n      mutation {\n        user {\n          bookmarkCreate (record: {\n            contentId: "'+n+'"\n            kind: "pathtype"\n          }) {\n            recordId\n          }\n        }\n      }\n    '}).then(function(n){return!n||n.errors?n:{data:n.data.user.bookmarkCreate}})},d=function(n){return Object(a.a)({query:'\n      mutation {\n        user {\n          followCreate (record: {\n            sourceId: "'+n+'"\n            kind: topictype\n          }) {\n            recordId\n          }\n        }\n      }\n    '}).then(function(n){return!n||n.errors?n:{data:n.data.user.bookmarkCreate}})},f=function(n){return Object(a.a)({query:'\n      mutation {\n        user {\n          bookmarkRemoveOne (filter: {\n            contentId: "'+n+'"\n            kind: "pathtype"\n          }) {\n            recordId\n          }\n        }\n      }\n    '}).then(function(n){return!n||n.errors?n:{data:n.data.user.bookmarkRemoveOne}})},h=function(n){return Object(a.a)({query:'\n      mutation {\n        user {\n          followRemoveOne (filter: {\n            sourceId: "'+n+'"\n            kind: topictype\n          }) {\n            recordId\n          }\n        }\n      }\n    '}).then(function(n){return!n||n.errors?n:{data:n.data.user.bookmarkRemoveOne}})},m=function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"5afb057a2808c00064203a3e";return Object(a.a)({query:'\n      mutation{\n        user{\n          pathAddTopic(record: {\n            topicId: "'+e+'",\n            levelId: "'+t+'"\n          }, filter: {\n            _id: "'+n+'"\n          }) {\n            privacy\n            profileId\n              topic {\n                topicId\n                levelId\n                createdAt\n              }\n          }\n        }\n      }\n    '}).then(function(n){return!n||n.errors?n:{data:n.data.user}})},p=function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"5afb057a2808c00064203a3e";return Object(a.a)({query:'\n      mutation{\n        user{\n          pathRemoveTopic(record: {\n            topicId: "'+e+'",\n            levelId: "'+t+'"\n          }, filter: {\n            _id: "'+n+'"\n          }) {\n            privacy\n            profileId\n              topic {\n                topicId\n                levelId\n                createdAt\n              }\n          }\n        }\n      }\n    '}).then(function(n){return!n||n.errors?n:{data:n.data.user}})},v=function(){return Object(a.a)({query:"\n      query {\n        viewer {\n          levelMany{\n            _id\n            title\n            levelNumber\n          }\n        }\n      }\n    "}).then(function(n){return!n||n.errors?n:n.data.viewer.levelMany})},y=function(n,e){var t=r(JSON.stringify(e));return Object(a.a)({query:'\n      mutation {\n        user {\n          pathUpdateOne (\n            record: {layout: "'+t+'"},\n            filter: {_id: "'+n+'"}) {\n            recordId\n          } \n        }\n      }\n    '}).then(function(n){return!n||n.errors?n:n.data})},g=function(n,e){return Object(a.a)({query:'\n      mutation {\n        user {\n          pathUpdateOne (\n            record: {title: "'+e+'"},\n            filter: {_id: "'+n+'"}) {\n            recordId\n          } \n        }\n      }\n    '}).then(function(n){return!n||n.errors?n:n.data})},b=function(n,e){return Object(a.a)({query:"\n      mutation {\n        user {\n          pathUpdateOne (\n            record: {privacy: "+e+'},\n            filter: {_id: "'+n+'"}) {\n            recordId\n          } \n        }\n      }\n    '}).then(function(n){return!n||n.errors?n:n.data})},_=function(n,e){return Object(a.a)({query:'\n      mutation {\n        user {\n          pathUpdateOne (\n            record: {shortDescription: "'+e+'"},\n            filter: {_id: "'+n+'"}) {\n            recordId\n          } \n        }\n      }\n    '}).then(function(n){return!n||n.errors?n:n.data})},k=function(n,e,t){var r=t?"private":"everyone";return Object(a.a)({query:'\n      mutation{\n        user{\n          pathCreate(record: {\n            title: "'+n+'",\n            privacy: '+r+',\n            shortDescription: "'+e+'"\n          }){\n            recordId\n          }\n        }\n      }\n    '}).then(function(n){return!n||n.errors?n:n.data})},O=function(n){return Object(a.a)({query:'\n      mutation {\n        user {\n          pathRemoveOne(\n            filter: {\n              _id: "'+n+'"\n            }) {\n            recordId\n          }\n        }\n      }\n    '}).then(function(n){return!n||n.errors?n:n.data})},w=function(){return Object(a.a)({query:"\n      query{\n        viewer{\n          pathSearchUser {\n            count\n            hits {\n              _id\n              _source {\n                privacy\n                title\n              }\n            }\n          }\n        }\n      }\n    "}).then(function(n){return!n||n.errors?n:n.data.viewer.pathSearchUser.hits})}}});