webpackJsonp([6],{922:function(e,n,t){"use strict";function r(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}function c(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0}),t.d(n,"default",function(){return v});var u=t(0),l=t.n(u),s=t(928),d=t(444),f=t.n(d),m=t(62),h=t(145),p=(t.n(h),function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}()),v=function(e){function n(){var e,t,r,c;o(this,n);for(var u=arguments.length,l=Array(u),d=0;d<u;d++)l[d]=arguments[d];return t=r=i(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(l))),r.state={data:[],followedData:[],search:"",openAddModal:!1,isPrivate:!0,title:"",description:"",myPaths:[]},r.getData=function(){Object(s.g)().then(function(e){if(e&&!e.errors){var n=e.data.items;r.setState({data:n})}}),Object(s.d)().then(function(e){if(e&&!e.errors){var n=e.data.items;r.setState({followedData:n})}}),Object(s.e)().then(function(e){return r.setState({myPaths:e})})},r._handleBookmark=function(e){Object(s.a)(e).then(function(e){if(!e||e.errors)return void h.toast.error("Path followed failed.");h.toast.success("Path followed successfully"),r.getData()})},r._handleBookmarkRemove=function(e){Object(s.l)(e).then(function(e){if(!e||e.errors)return void h.toast.error("Path un-followed failed.");h.toast.success("Path un-followed successfully"),r.getData()})},r._goToDetails=function(e){r.props.history.push("/path/"+e)},r._createPath=function(){var e=r.state,n=e.description,t=e.title,a=e.isPrivate;Object(s.k)(t,n,a).then(function(){h.toast.success("Add path successful."),r.setState({title:"",description:"",isPrivate:!0,openAddModal:!1}),r.getData()})},r._handleChange=function(e,n){var t=n.name,o=n.value;return r.setState(a({},t,o))},c=t,i(r,c)}return c(n,e),p(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,n=this.state,t=n.data,a=n.followedData,o=n.search,i=n.openAddModal,c=n.isPrivate,u=n.title,s=n.description,d=n.myPaths,h=a.map(function(e){return{_id:e.contentId,title:e.content.title,follow:!0}}),p=f()([].concat(r(t),r(h)),function(e){return e._id}),v=[],y=[];return p.map(function(e){return-1!==e.title.toLowerCase().indexOf(o.toLowerCase())&&v.push(e),null}),d.map(function(e){return-1!==e._source.title.toLowerCase().indexOf(o.toLowerCase())&&y.push(e),null}),l.a.createElement("div",{className:"series-list"},l.a.createElement("div",{className:"series-search-bar"},l.a.createElement(m.e,{name:"search",size:"big"}),l.a.createElement("input",{type:"text",name:"search",value:o,onChange:function(n){return e.setState({search:n.target.value})}})),l.a.createElement("div",{className:"series-path clearfix active"},l.a.createElement("h3",{className:"recommend-title"},"My paths",l.a.createElement(m.a,{onClick:function(){return e.setState({openAddModal:!0})},floated:"right"},"Add a path")),l.a.createElement("div",{className:"series-items",style:{maxHeight:600*Math.ceil(y.length/4)}},y.map(function(n,t){return l.a.createElement("div",{key:t,className:"series-item"+(n.follow?" follow":"")},l.a.createElement("div",{className:"series-item-content",onClick:function(){return e._goToDetails(n._id)}},n._source.title),"private"===n._source.privacy&&l.a.createElement(m.g,{className:"path-privacy"},l.a.createElement(m.e,{name:"lock"}),"Private"),"everyone"===n._source.privacy&&l.a.createElement(m.g,{className:"path-privacy"},l.a.createElement(m.e,{name:"globe"}),"Public"))})),l.a.createElement("h3",{className:"recommend-title"},"Recommended paths"),l.a.createElement("div",{className:"series-items",style:{maxHeight:600*Math.ceil(p.length/4)}},v.map(function(n,t){return l.a.createElement("div",{key:t,className:"series-item"+(n.follow?" follow":"")},l.a.createElement("div",{className:"series-item-content",onClick:function(){return e._goToDetails(n._id)}},n.title),l.a.createElement(m.j,{inverted:!0,trigger:l.a.createElement(m.e,{className:"series-bookmark"+(n.follow?" followed":""),size:"large",name:"check square outline",onClick:function(){return n.follow?e._handleBookmarkRemove(n._id):e._handleBookmark(n._id)}}),content:"Follow this path"}))}))),l.a.createElement(m.i,{open:i,size:"tiny",className:"add-path-modal"},l.a.createElement(m.i.Header,null,"Add path"),l.a.createElement(m.i.Content,null,l.a.createElement(m.d,null,l.a.createElement(m.d.Input,{name:"title",onChange:this._handleChange,value:u,placeholder:"Enter path title"}),l.a.createElement(m.d.TextArea,{name:"description",onChange:this._handleChange,value:s,placeholder:"Enter path description"})),l.a.createElement("div",{className:"clearfix top-10"},l.a.createElement("div",{className:"left"},c&&l.a.createElement(m.g,{onClick:function(){return e.setState({isPrivate:!1})}},l.a.createElement(m.e,{name:"lock"}),"Private"),!c&&l.a.createElement(m.g,{onClick:function(){return e.setState({isPrivate:!0})}},l.a.createElement(m.e,{name:"globe"}),"Public")),l.a.createElement("div",{className:"right"},l.a.createElement(m.a,{content:"Ok",primary:!0,size:"small",floated:"right",onClick:this._createPath}),l.a.createElement(m.a,{content:"Cancel",size:"small",floated:"right",onClick:function(){return e.setState({openAddModal:!1})}}))))))}}]),n}(u.Component)},928:function(e,n,t){"use strict";t.d(n,"g",function(){return a}),t.d(n,"c",function(){return o}),t.d(n,"d",function(){return i}),t.d(n,"h",function(){return c}),t.d(n,"f",function(){return u}),t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s}),t.d(n,"l",function(){return d}),t.d(n,"m",function(){return f}),t.d(n,"j",function(){return m}),t.d(n,"i",function(){return h}),t.d(n,"k",function(){return p}),t.d(n,"e",function(){return v});var r=t(146),a=function(){return Object(r.a)({query:"\n      {\n        viewer {\n          pathRecommend {\n            items {\n              title\n              kind\n              _id\n              contentData {\n                _id\n                title\n                kind\n                contentData {\n                  _id\n                  title\n                  kind\n                  contentId\n                  shortDescription\n                  sourceImage\n                }\n              }\n            }\n          }\n        }\n      }\n    "}).then(function(e){return!e||e.errors?e:{data:e.data.viewer.pathRecommend}})},o=function(){return Object(r.a)({query:"\n      query{\n        viewer{\n          topicPagination(page: 1, perPage: 100) {\n            count\n            items{\n              title\n              _id\n              shortDescription\n              image\n            }\n            follow {\n              sourceId\n            }\n          }\n        }\n      }\n    "}).then(function(e){return!e||e.errors?e:e.data.viewer.topicPagination})},i=function(){return Object(r.a)({query:'\n      {\n      viewer {\n        userbookmarkPagination (filter: {kind: "pathtype"}) {\n          items {\n            contentId\n            content {\n              title\n            }\n          }\n        }\n      }\n    }\n    '}).then(function(e){return!e||e.errors?e:{data:e.data.viewer.userbookmarkPagination}})},c=function(e){return Object(r.a)({query:'\n      query{\n        viewer{\n          articleFromTopic(filter: {\n            topicId: "'+e+'"\n          }) {\n            title\n            _id\n            url\n            authorImage\n            author\n            shortDescription\n            longDescription\n            sourceImage\n          }\n        }\n      }\n    '}).then(function(e){return!e||e.errors?e:e.data.viewer.articleFromTopic})},u=function(e){return Object(r.a)({query:'\n      {\n        viewer {\n          pathOne(filter: {_id: "'+e+'"}) {\n            _id\n            title\n            shortDescription\n            topic {\n              topicId\n              levelId\n              createdAt\n            }\n            topicData {\n              _id\n              articleData {\n                url\n                _id\n                title\n                custom\n                author\n                author\n                authorImage\n                sourceImage\n                shortDescription\n              }\n            }\n          }\n        }\n      }\n    '}).then(function(e){return!e||e.errors?e:e.data.viewer.pathOne})},l=function(e){return Object(r.a)({query:'\n      mutation {\n        user {\n          bookmarkCreate (record: {\n            contentId: "'+e+'"\n            kind: "pathtype"\n          }) {\n            recordId\n          }\n        }\n      }\n    '}).then(function(e){return!e||e.errors?e:{data:e.data.user.bookmarkCreate}})},s=function(e){return Object(r.a)({query:'\n      mutation {\n        user {\n          followCreate (record: {\n            sourceId: "'+e+'"\n            kind: topictype\n          }) {\n            recordId\n          }\n        }\n      }\n    '}).then(function(e){return!e||e.errors?e:{data:e.data.user.bookmarkCreate}})},d=function(e){return Object(r.a)({query:'\n      mutation {\n        user {\n          bookmarkRemoveOne (filter: {\n            contentId: "'+e+'"\n            kind: "pathtype"\n          }) {\n            recordId\n          }\n        }\n      }\n    '}).then(function(e){return!e||e.errors?e:{data:e.data.user.bookmarkRemoveOne}})},f=function(e){return Object(r.a)({query:'\n      mutation {\n        user {\n          followRemoveOne (filter: {\n            sourceId: "'+e+'"\n            kind: topictype\n          }) {\n            recordId\n          }\n        }\n      }\n    '}).then(function(e){return!e||e.errors?e:{data:e.data.user.bookmarkRemoveOne}})},m=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"5afb057a2808c00064203a3e";return Object(r.a)({query:'\n      mutation{\n        user{\n          pathAddTopic(record: {\n            topicId: "'+n+'",\n            levelId: "'+t+'"\n          }, filter: {\n            _id: "'+e+'"\n          }) {\n            privacy\n            profileId\n              topic {\n                topicId\n                levelId\n                createdAt\n              }\n          }\n        }\n      }\n    '}).then(function(e){return!e||e.errors?e:{data:e.data.user}})},h=function(){return Object(r.a)({query:"\n      query {\n        viewer {\n          levelMany{\n            _id\n            title\n            levelNumber\n          }\n        }\n      }\n    "}).then(function(e){return!e||e.errors?e:e.data.viewer.levelMany})},p=function(e,n,t){var a=t?"private":"everyone";return Object(r.a)({query:'\n      mutation{\n        user{\n          pathCreate(record: {\n            title: "'+e+'",\n            privacy: '+a+',\n            shortDescription: "'+n+'"\n          }){\n            recordId\n          }\n        }\n      }\n    '}).then(function(e){return!e||e.errors?e:e.data})},v=function(){return Object(r.a)({query:"\n      query{\n        viewer{\n          pathSearchUser {\n            count\n            hits {\n              _id\n              _source {\n                privacy\n                title\n              }\n            }\n          }\n        }\n      }\n    "}).then(function(e){return!e||e.errors?e:e.data.viewer.pathSearchUser.hits})}}});