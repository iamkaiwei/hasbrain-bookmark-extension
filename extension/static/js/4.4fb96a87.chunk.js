webpackJsonp([4],{917:function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}function a(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0}),t.d(n,"default",function(){return p});var i=t(0),c=t.n(i),u=t(923),s=t(69),l=t.n(s),f=t(89),d=t(226),m=(t.n(d),function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}()),p=function(e){function n(){var e,t,a,i;r(this,n);for(var c=arguments.length,s=Array(c),l=0;l<c;l++)s[l]=arguments[l];return t=a=o(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(s))),a.state={data:null,openedItem:0,search:""},a.getData=function(){Object(u.c)().then(function(e){return a.setState({data:e})})},a._handleBookmark=function(e){console.log(e);var n=a.state.data;-1===(n.follow?n.follow.map(function(e){return e.sourceId}):[]).indexOf(e)?Object(u.b)(e).then(function(e){if(!e||e.errors)return void d.toast.error("Topic followed failed.");d.toast.success("Topic followed successfully"),a.getData()}):Object(u.g)(e).then(function(e){if(!e||e.errors)return void d.toast.error("Topic un-followed failed.");d.toast.success("Topic un-followed successfully"),a.getData()})},a._goToDetails=function(e){a.props.history.push("/series/"+e)},i=t,o(a,i)}return a(n,e),m(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,n=this.state,t=n.data,r=n.search;if(l()(t))return null;var o=t.follow?t.follow.map(function(e){return e.sourceId}):[],a=[];return t.items.map(function(e){return-1!==e.title.toLowerCase().indexOf(r.toLowerCase())&&a.push(e),null}),console.log(o),c.a.createElement("div",{className:"series-list"},c.a.createElement("div",{className:"series-search-bar"},c.a.createElement(f.c,{name:"search",size:"big"}),c.a.createElement("input",{type:"text",name:"search",value:r,onChange:function(n){return e.setState({search:n.target.value})}})),c.a.createElement("div",{className:"series-path clearfix active"},c.a.createElement("div",{className:"series-items"},a.map(function(n){return c.a.createElement("div",{key:n._id,className:"series-item"+(-1===o.indexOf(n._id)?"":" follow")},c.a.createElement("div",{className:"series-item-content",onClick:function(){return e._goToDetails(n._id)}},n.title),c.a.createElement(f.g,{inverted:!0,trigger:c.a.createElement(f.c,{className:"series-bookmark",size:"large",name:"check square outline",onClick:function(){return e._handleBookmark(n._id)}}),content:"Follow this path"}))}))))}}]),n}(i.Component)},923:function(e,n,t){"use strict";t.d(n,"e",function(){return o}),t.d(n,"c",function(){return a}),t.d(n,"d",function(){return i}),t.d(n,"a",function(){return c}),t.d(n,"b",function(){return u}),t.d(n,"f",function(){return s}),t.d(n,"g",function(){return l});var r=t(227),o=function(){return Object(r.a)({query:"\n      {\n        viewer {\n          pathRecommend {\n            items {\n              title\n              kind\n              _id\n              contentData {\n                _id\n                title\n                kind\n                contentData {\n                  _id\n                  title\n                  kind\n                  contentId\n                  shortDescription\n                  sourceImage\n                }\n              }\n            }\n          }\n        }\n      }\n    "}).then(function(e){return!e||e.errors?e:{data:e.data.viewer.pathRecommend}})},a=function(){return Object(r.a)({query:"\n      query{\n        viewer{\n          topicPagination(page: 1, perPage: 100) {\n            count\n            items{\n              title\n              _id\n            \n            }\n            follow {\n              sourceId\n            }\n          }\n        }\n      }\n    "}).then(function(e){return!e||e.errors?e:e.data.viewer.topicPagination})},i=function(){return Object(r.a)({query:'\n      {\n      viewer {\n        userbookmarkPagination (filter: {kind: "pathtype"}) {\n          items {\n            contentId\n            content {\n              title\n            }\n          }\n        }\n      }\n    }\n    '}).then(function(e){return!e||e.errors?e:{data:e.data.viewer.userbookmarkPagination}})},c=function(e){return Object(r.a)({query:'\n      mutation {\n        user {\n          bookmarkCreate (record: {\n            contentId: "'+e+'"\n            kind: "pathtype"\n          }) {\n            recordId\n          }\n        }\n      }\n    '}).then(function(e){return!e||e.errors?e:{data:e.data.user.bookmarkCreate}})},u=function(e){return Object(r.a)({query:'\n      mutation {\n        user {\n          followCreate (record: {\n            sourceId: "'+e+'"\n            kind: topictype\n          }) {\n            recordId\n          }\n        }\n      }\n    '}).then(function(e){return!e||e.errors?e:{data:e.data.user.bookmarkCreate}})},s=function(e){return Object(r.a)({query:'\n      mutation {\n        user {\n          bookmarkRemoveOne (filter: {\n            contentId: "'+e+'"\n            kind: "pathtype"\n          }) {\n            recordId\n          }\n        }\n      }\n    '}).then(function(e){return!e||e.errors?e:{data:e.data.user.bookmarkRemoveOne}})},l=function(e){return Object(r.a)({query:'\n      mutation {\n        user {\n          followRemoveOne (filter: {\n            sourceId: "'+e+'"\n            kind: topictype\n          }) {\n            recordId\n          }\n        }\n      }\n    '}).then(function(e){return!e||e.errors?e:{data:e.data.user.bookmarkRemoveOne}})}}});