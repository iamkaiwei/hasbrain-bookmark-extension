webpackJsonp([4],{921:function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"default",function(){return y});var c,l,s,u,d=n(0),m=n.n(d),f=n(443),p=n(930),g=n(145),h=(n.n(g),n(70)),v=n(147),_=n.n(v),b=n(62),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),y=(c=Object(h.b)(function(e){return{profile:e.profile}}))((u=s=function(e){function t(){var e,n,i,c;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),i.state={articles:[],loadingId:"",page:1,stopLoadingMore:!1,showLoadMore:!1,loadingArticles:!0},i.loadMore=function(){i.state.loadingArticles||i.state.stopLoadingMore||i.setState({page:i.state.page+1,loadingArticles:!0},i.getArticles)},i.getArticles=function(){Object(f.e)({page:i.state.page,perPage:20,filter:{state:"published"}}).then(function(e){if(i.setState({loadingArticles:!1}),e&&!e.errors){var t=e.data,n=t.count,r=t.items,o=r.map(function(e){return Object.assign({_id:e._id},e.article)})||[],c=[].concat(a(i.state.articles),a(o)),l=!0,s=!1;c.length!==n&&0!==r.length||(s=!0,l=!1),i.setState({articles:c,stopLoadingMore:s,showLoadMore:l})}}).catch(function(e){console.log(e),i.setState({loadingArticles:!1,page:1===i.state.page?i.state.page:i.state.page-1})})},i._handleRemoveBookmark=function(e){i.setState({loadingId:e}),Object(f.b)(e).then(function(t){if(i.setState({loadingId:""}),!t||t.errros)return void g.toast.error("Remove bookmark failed.");g.toast.success("Remove bookmark successfully."),i.removeItem(e)})},i._handleArchiveBookmark=function(e){i.setState({loadingId:e}),Object(f.c)({filter:{contentId:e},record:{state:"archived"}}).then(function(t){if(i.setState({loadingId:""}),!t||t.errors)return void g.toast.error("Archive article failed.");g.toast.success("Archive article successfully."),i.removeItem(e)})},i.removeItem=function(e){var t=i.state.articles,n=_()(t,{_id:e});t.splice(n,1),i.setState([t])},i.login=function(){window.chrome.runtime.id?window.open("http://hasbrain.surge.sh/#/?extensionId="+(window.chrome.runtime.id||"")):window.open("http://hasbrain.surge.sh/#/?redirect_uri="+document.URL,"_blank")},c=n,o(i,c)}return i(t,e),k(t,[{key:"componentWillMount",value:function(){this.props.profile.isLogged&&this.getArticles()}},{key:"componentWillReceiveProps",value:function(e){console.log(this.props.profile.info._id),console.log(e.profile.info._id),this.props.profile.isLogged!==e.profile.isLogged&&e.profile.isLogged&&this.getArticles()}},{key:"render",value:function(){var e=this,t=this.state,n=t.articles,a=t.loadingId,r=t.showLoadMore,o=t.loadingArticles;return this.props.profile.isLogged?m.a.createElement("div",null,m.a.createElement("div",{className:"heading"},m.a.createElement("div",{className:"heading__left"},m.a.createElement("h2",null,"Saved articles"))),m.a.createElement("div",{className:"article__list"},n.map(function(t){return m.a.createElement(p.a,{key:t._id,article:t,loading:t._id===a,onRemove:function(){return e._handleRemoveBookmark(t._id)},onArchive:function(){return e._handleArchiveBookmark(t._id)}})})),o&&0===n.length&&m.a.createElement("div",{className:"align-center"},"Loading saved articles..."),r&&m.a.createElement("div",{className:"align-center",style:{paddingTop:10,paddingBottom:30}},m.a.createElement(b.a,{primary:!0,size:"tiny",className:"article__btn-load-more",onClick:this.loadMore,loading:o},"Load More"))):m.a.createElement("div",null,"Please login. ",m.a.createElement("a",{onClick:this.login},"Login"))}}]),t}(d.Component),s.propTypes={},l=u))||l},930:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return p});var i,c,l=n(0),s=n.n(l),u=n(1),d=n.n(u),m=n(62),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=(c=i=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),f(t,[{key:"shouldComponentUpdate",value:function(e){return JSON.stringify(this.props.article)!==JSON.stringify(e.article)||this.props.article.isBookmark!==e.article.isBookmark||this.props.loading!==e.loading}},{key:"render",value:function(){var e=this.props,t=e.article,n=e.loading,a=e.onArchive,r=e.onRemove,o=e.onBookmark;return s.a.createElement("div",{className:"article"},n&&s.a.createElement("div",{className:"ui dimmer active inverted"},s.a.createElement("div",{className:"ui loader"})),s.a.createElement("a",{href:t.contentId,target:"_blank",className:"article__title"},t.title||t.contentId),s.a.createElement("a",{className:"article__image",href:t.contentId,target:"_blank"},t.sourceImage?s.a.createElement("img",{src:t.sourceImage,alt:""}):s.a.createElement("p",null,t.shortDescription)),s.a.createElement("div",{className:"article__content"},s.a.createElement("div",{className:"article__actions"},s.a.createElement("div",{className:"article__source"},t.sourceName),s.a.createElement("div",{className:"article_settings"},s.a.createElement("div",{className:"article__action"},s.a.createElement("i",{className:"bookmark"+(!t.isBookmark&&"outline")+"icon"}))),o&&s.a.createElement("div",{className:"article_settings"},s.a.createElement("div",{onClick:o,className:"article__action"},s.a.createElement(m.e,{name:"bookmark"+(t.isBookmark?"":" outline")}))),a&&r&&s.a.createElement("div",{className:"article__settings"},s.a.createElement(m.c,{icon:"ellipsis vertical"},s.a.createElement(m.c.Menu,null,s.a.createElement(m.c.Item,{icon:"bookmark outline",text:"Remove bookmark",onClick:r}),s.a.createElement(m.c.Item,{icon:"trash",text:"Archive bookmark",onClick:a})))))))}}]),t}(l.Component),i.propTypes={article:d.a.object,loading:d.a.bool,onArchive:d.a.func,onRemove:d.a.func,onBookmark:d.a.func},c)}});