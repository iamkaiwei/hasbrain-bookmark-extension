webpackJsonp([4],{927:function(e,t,a){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),a.d(t,"default",function(){return _});var c,s,l=a(0),u=a.n(l),m=a(984),p=a(65),d=a(42),f=a(445),h=a(64),g=(a.n(h),a(149)),k=a.n(g),v=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_=(c=Object(p.b)(function(e){return{profile:e.profile,sources:e.common.sources}}))(s=function(e){function t(){var e,a,i,c;n(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return a=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.state={loadingArticles:!0,showLoadMore:!1,stopLoadingMore:!1,limit:20,skip:0,articles:[],loadingId:""},i.loadMore=function(){i.state.loadingArticles||i.state.stopLoadingMore||i.setState({skip:i.state.skip+i.state.limit,loadingArticles:!0},i.getArticles)},i.getArticles=function(){var e=i.state,t=e.limit,a=e.skip,n=i.props.match.params.sourceId;Object(f.d)({limit:t,skip:a,sourceName:n}).then(function(e){if(i.setState({loadingArticles:!1}),e&&!e.errors){var t=e.data,a=t.count,n=t.hits,o=n.map(function(e){return Object.assign({_id:e._id,isBookmark:!1},e._source)})||[],c=[].concat(r(i.state.articles),r(o)),s=!0,l=!1;c.length!==a&&0!==n.length||(l=!0,s=!1),i.setState({articles:c,stopLoadingMore:l,showLoadMore:s})}},function(e){console.log("error",e),i.setState({loadingArticles:!1,skip:0===a?a:a-t})})},i._handleBookmark=function(e){i.setState({loadingId:e}),Object(f.a)(e).then(function(t){if(i.setState({loadingId:""}),!t||t.errors)return void h.toast.error("Bookmark article failed.");h.toast.success("Bookmark article successfully.");var a=[].concat(r(i.state.articles)),n=k()(a,{_id:e});a[n]=Object.assign({},a[n],{isBookmark:!0}),i.setState({articles:a})})},c=a,o(i,c)}return i(t,e),v(t,[{key:"componentWillMount",value:function(){this.getArticles()}},{key:"componentWillReceiveProps",value:function(e){this.props.match.params.sourceId!==e.match.params.sourceId&&(this.props=e,this.setState({loadingArticles:!0,showLoadMore:!1,stopLoadingMore:!1,limit:20,skip:0,articles:[],loadingId:""},this.getArticles))}},{key:"render",value:function(){var e=this,t=this.state,a=t.articles,r=t.loadingId,n=t.showLoadMore,o=t.loadingArticles,i=this.props,c=i.match.params.sourceId,s=i.sources.items,l=void 0===s?[]:s,p=k()(l,{sourceId:c}),f=l[p].title+" - "||"";return u.a.createElement("div",null,u.a.createElement("div",{className:"heading"},u.a.createElement("div",{className:"heading__left"},u.a.createElement("h2",null,f," Latest articles"))),u.a.createElement("div",{className:"article__list"},a.map(function(t){return u.a.createElement(m.a,{key:t._id,article:t,loading:t._id===r,onBookmark:function(){return e._handleBookmark(t._id)}})})),o&&0===a.length&&u.a.createElement("div",{className:"align-center"},"Loading source's articles..."),n&&u.a.createElement("div",{className:"align-center",style:{paddingTop:10,paddingBottom:30}},u.a.createElement(d.a,{primary:!0,size:"tiny",className:"article__btn-load-more",onClick:this.loadMore,loading:o},"Load More")))}}]),t}(l.Component))||s},984:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a.d(t,"a",function(){return f});var i,c,s=a(0),l=a.n(s),u=a(1),m=a.n(u),p=a(42),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),f=(c=i=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),d(t,[{key:"shouldComponentUpdate",value:function(e){return JSON.stringify(this.props.article)!==JSON.stringify(e.article)||this.props.article.isBookmark!==e.article.isBookmark||this.props.loading!==e.loading}},{key:"render",value:function(){var e=this.props,t=e.article,a=e.loading,r=e.onArchive,n=e.onRemove,o=e.onBookmark;return l.a.createElement("div",{className:"article"},a&&l.a.createElement("div",{className:"ui dimmer active inverted"},l.a.createElement("div",{className:"ui loader"})),l.a.createElement("a",{href:t.contentId,target:"_blank",className:"article__title"},t.title||t.contentId),l.a.createElement("a",{className:"article__image",href:t.contentId,target:"_blank"},t.sourceImage?l.a.createElement("img",{src:t.sourceImage,alt:""}):l.a.createElement("p",null,t.shortDescription)),l.a.createElement("div",{className:"article__content"},l.a.createElement("div",{className:"article__actions"},l.a.createElement("div",{className:"article__source"},t.sourceName),l.a.createElement("div",{className:"article_settings"},l.a.createElement("div",{className:"article__action"},l.a.createElement("i",{className:"bookmark"+(!t.isBookmark&&"outline")+"icon"}))),o&&l.a.createElement("div",{className:"article_settings"},l.a.createElement("div",{onClick:o,className:"article__action"},l.a.createElement(p.d,{name:"bookmark"+(t.isBookmark?"":" outline")}))),r&&n&&l.a.createElement("div",{className:"article__settings"},l.a.createElement(p.c,{icon:"ellipsis vertical"},l.a.createElement(p.c.Menu,null,l.a.createElement(p.c.Item,{icon:"bookmark outline",text:"Remove bookmark",onClick:n}),l.a.createElement(p.c.Item,{icon:"trash",text:"Archive bookmark",onClick:r})))))))}}]),t}(s.Component),i.propTypes={article:m.a.object,loading:m.a.bool,onArchive:m.a.func,onRemove:m.a.func,onBookmark:m.a.func},c)}});